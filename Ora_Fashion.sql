CREATE TABLE CATEGORIES (
    CategoryID NUMBER PRIMARY KEY,
    CategoryName NVARCHAR2(50) NOT NULL
);

CREATE SEQUENCE CategoryID_Seq
    START WITH 1
    INCREMENT BY 1
    NOCACHE
    NOCYCLE;


---------------------------------------------

CREATE TABLE APRODUCTS (
    ProductID NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY,
    ProductName NVARCHAR2(50) NOT NULL,
    Price NUMBER(10, 2) CHECK (Price > 0),
    Image NVARCHAR2(500) NOT NULL,
    Season NUMBER(1,0) CHECK (Season IN (1, 2)),
    Description NVARCHAR2(500) NOT NULL,
    Gender NVARCHAR2(10) NOT NULL,
    CategoryID NUMBER,
    PRIMARY KEY (ProductID),
    FOREIGN KEY (CategoryID) REFERENCES CATEGORIES(CategoryID)
);


-------------------------------------------------------------

CREATE TABLE AGENTA (
    AgentID NUMBER PRIMARY KEY,
    AgentName NVARCHAR2(10)
);

--CREATE TABLE SIZEA (
--    SizeID NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY (START WITH 1),
--    AgentID NUMBER,
--    ProductID NUMBER,
--    Size NVARCHAR2(20) NOT NULL,
--    Quantity NUMBER CHECK (Quantity > 0),
--    
--    FOREIGN KEY (AgentID) REFERENCES AGENTA(AgentID),
--    FOREIGN KEY (ProductID) REFERENCES APRODUCTS(ProductID)
--)

CREATE TABLE SIZEA (
    SiID NUMBER GENERATED ALWAYS AS IDENTITY (START WITH 1),
    AgentID NUMBER,
    ProductID NUMBER,
    Size NVARCHAR2(20) NOT NULL,
    Quantity NUMBER CHECK (Quantity > 0),
    PRIMARY KEY (SizeID)
);
alter table sizeB add CONSTRAINT Fk_Agent_SizeB Foreign key (AgentId) references AgentA(AgentId)
alter table sizeB add Constraint Fk_Product_SizeB Foreign key (ProductId) references AProducts(ProductId)
alter table sizeB modify sizeId generated by default on null as IDENTITY(Start with 1)
----------------------------------------------------------------
CREATE TABLE SIZEB 
(
  SIZEID NUMBER Generated By default on null as identity NOT NULL 
, AGENTID NUMBER 
, PRODUCTID NUMBER 
, SIZEPRO NVARCHAR2(20) NOT NULL 
, QUANTITY NUMBER 
, CONSTRAINT SIZEB_PK PRIMARY KEY 
  (
    SIZEID 
  )
  ENABLE 
);



-- TABLE TO Login
CREATE TABLE ACCOUNT (
    UserID NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY (START WITH 1),
    UserName NVARCHAR2(50) NOT NULL,
    PassWord NVARCHAR2(50) NOT NULL,
    PhoneNumber NUMBER NOT NULL,
    Role NUMBER,
    Email NVARCHAR2(50) NOT NULL,
    Avatar VARCHAR2(500),
    CONSTRAINT PK_Account PRIMARY KEY (UserID),
    CONSTRAINT UQ_UserName UNIQUE (UserName),
    CONSTRAINT UQ_Email UNIQUE (Email)
);
-----------------------------------------------------------------
-- TABLE TO Stores Infor of Customer'Orders

CREATE TABLE ORDERS (
    OrderID NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY (START WITH 1),
    Payment NUMBER NOT NULL CHECK (Payment > 0),
    Address NVARCHAR2(100) NOT NULL,
    OrderDate DATE,
    ShipDate DATE,
    ReceivedDate DATE,
    Status NVARCHAR2(50) NOT NULL,
    CONSTRAINT PK_Orders PRIMARY KEY (OrderID)
);


-------------------------------------------------------

CREATE TABLE CART (
    CartID NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY (START WITH 1),
    UserID NUMBER,
    SizeID NUMBER,
    Quantity NUMBER CHECK (Quantity > 0),
    OrderID NUMBER,
    CONSTRAINT PK_Cart PRIMARY KEY (CartID),
    CONSTRAINT FK_UserID FOREIGN KEY (UserID) REFERENCES ACCOUNT(UserID),
    CONSTRAINT FK_SizeID FOREIGN KEY (SizeID) REFERENCES SIZEB(SizeID),
    CONSTRAINT FK_OrderID FOREIGN KEY (OrderID) REFERENCES ORDERS(OrderID)
);



CREATE TABLE REVENUE (
    RevenueId NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY (START WITH 1),
    CartID NUMBER,
    DateEx DATE,
    CONSTRAINT PK_Revenue PRIMARY KEY (RevenueId),
    CONSTRAINT FK_CartID FOREIGN KEY (CartID) REFERENCES CART(CartID)
);
----------------------------------------------------------------

CREATE TABLE WISH (
    ProductID NUMBER,
    UserID NUMBER,
    CONSTRAINT FK_Product_Wish FOREIGN KEY (ProductID) REFERENCES APRODUCTS(ProductID),
    CONSTRAINT FK_User_Wish FOREIGN KEY (UserID) REFERENCES ACCOUNT(UserID)
);

CREATE TABLE COMMENTA (
    ProductID NUMBER,
    UserID NUMBER,
    Content CLOB,
    CONSTRAINT FK_Product_Comment FOREIGN KEY (ProductID) REFERENCES APRODUCTS(ProductID),
    CONSTRAINT FK_User_Comment FOREIGN KEY (UserID) REFERENCES ACCOUNT(UserID)
);
INSERT INTO CATEGORIES VALUES ( 1,N'ÁO KHOÁC');
INSERT INTO CATEGORIES VALUES ( 2, N'ÁO PHÔNG');
INSERT INTO CATEGORIES VALUES ( 3, N'ÁO HOODIE');
INSERT INTO CATEGORIES VALUES ( 4, N'QU?N JEAN');
INSERT INTO CATEGORIES VALUES ( 5, N'QU?N N?');
INSERT INTO CATEGORIES VALUES ( 6, N'GIÀY');

SELECT * FROM CATEGORIES;

INSERT INTO APRODUCTS(
    ProductName,
    Price,
    Image,
    Season,
    Description,
    Gender,
    CategoryID
) VALUES ( 
N'ÁO KHOÁC GIÓ UN OVS',
300, 
'https://cdn2.boo.vn/media/catalog/product/cache/a3c240e3377445b2b4921e41d3348417/1/_/1.2.05.3.02.002.222.23-10700011-bst-1_6.jpg',
1,
'Áo khoác nam ?ep',
'male',
1
);
INSERT INTO APRODUCTS(
    ProductName,
    Price,
    Image,
    Season,
    Description,
    Gender,
    CategoryID
) VALUES ( 
'ÁO KHOÁC N? NAM',
250, 
'https://cdn2.boo.vn/media/catalog/product/cache/a3c240e3377445b2b4921e41d3348417/1/_/1.2.05.2.02.002.220.01-10200011-bst-1.jpg',
2,
'Áo khoác n? cho nam ?ep',
'male',
3
);
INSERT INTO APRODUCTS(
    ProductName,
    Price,
    Image,
    Season,
    Description,
    Gender,
    CategoryID
) VALUES ( 
'ÁO PHÔNG N? CÁ TINH',
200, 
'https://cdn2.boo.vn/media/catalog/product/cache/a3c240e3377445b2b4921e41d3348417/1/_/1.2.02.3.18.003.122.23-10600017-bst-1.jpg',
1,
'Áo phông n? siêu xinh',
'female',
2
);	

INSERT INTO APRODUCTS(
    ProductName,
    Price,
    Image,
    Season,
    Description,
    Gender,
    CategoryID
) VALUES ( 
N'QU?N JEAN NAM ??P SANG',
250, 
'https://cdn2.boo.vn/media/catalog/product/cache/a3c240e3377445b2b4921e41d3348417/1/_/1.2.21.2.02.001.122.23-60600015-bst-1.jpg',
1,
'Qu?n jean nam nhìn khá b?i b?m',
'male',
4
);	


INSERT INTO APRODUCTS(
    ProductName,
    Price,
    Image,
    Season,
    Description,
    Gender,
    CategoryID
) VALUES ( 
N'QU?N N? N? ?ANG IU',
300, 
'https://cdn2.boo.vn/media/catalog/product/cache/a3c240e3377445b2b4921e41d3348417/1/_/1.2.11.3.02.007.222.23-11200011-bst-1.jpg',
1,
'Qu?n n? cho các b?n n? xinh gái',
'female',
5
);	



INSERT INTO APRODUCTS(
    ProductName,
    Price,
    Image,
    Season,
    Description,
    Gender,
    CategoryID
) VALUES ( 
N'GIÀY N? C?C XINH',
400, 
'https://static.nike.com/a/images/c_limit,w_592,f_auto/t_product_v1/ddf629be-8bfd-457a-868c-1e579a637f7f/pegasus-turbo-next-nature-road-running-shoes-f3Q3zZ.png',
NULL,
'Giày n? siêu cá tính',
'female',
6
);

INSERT INTO APRODUCTS(
    ProductName,
    Price,
    Image,
    Season,
    Description,
    Gender,
    CategoryID
) VALUES ( 
N'ÁO KHOÁC KHAKI SPEEDUP',
700, 
'https://cdn2.boo.vn/media/catalog/product/cache/a3c240e3377445b2b4921e41d3348417/1/_/1.2.08.2.18.001.222.23-11500104-bst-1.jpg',
1,
'ÁO KHOÁC NAM ?UA XE',
'male',
1
);


INSERT INTO APRODUCTS(
    ProductName,
    Price,
    Image,
    Season,
    Description,
    Gender,
    CategoryID
) VALUES ( 
N'ÁO KHOÁC PARKA UN ?ÍNH PATCH',
700, 
'https://cdn2.boo.vn/media/catalog/product/1/_/1.2.08.3.06.012.222.23-10200011-bst-1.jpg',
2,
'ÁO KHOÁC PHAO ?EN XÌ',
'male',
1
);

INSERT INTO APRODUCTS(
    ProductName,
    Price,
    Image,
    Season,
    Description,
    Gender,
    CategoryID
) VALUES ( 
N'ÁO KHOÁC GIÓ UN VARSITY',
700, 
'https://cdn2.boo.vn/media/catalog/product/1/_/1.2.08.3.02.015.222.23-10200011-n-5.jpg',
1,
'ÁO KHOÁC CON TH?',
'male',
1
);

INSERT INTO APRODUCTS (
    ProductName,
    Price,
    Image,
    Season,
    Description,
    Gender,
    CategoryID
) VALUES ( 
    N'ÁO KHOÁC PARKA LÔNG V?T',
    700, 
    'https://cdn2.boo.vn/media/catalog/product/1/_/1.0.08.2.02.001.221.23-10300011-bst-1.jpg',
    2,
    'ÁO KHOÁC PHAO MÀU NÂU TO B?T',
    'male',
    1
);



INSERT INTO APRODUCTS(
    ProductName,
    Price,
    Image,
    Season,
    Description,
    Gender,
    CategoryID
) VALUES ( 
N'QU?N DÀI N? FLARE THÊU',
400, 
'https://cdn2.boo.vn/media/catalog/product/1/_/1.2.11.1.02.003.222.23-10200011-bst-1.jpg',
1,
'QU?N N? N? ?ANG IU MÀU NÂU VÔ CÙNG B?I B?M',
'female',
5
)	;

select * from aproducts

INSERT INTO AGENTA VALUES(
1, 'HANOI'
);

INSERT INTO  AGENTA VALUES (
2, 'DANANG'
);

INSERT INTO  AGENTA VALUES (
3, 'SAIGON'
);
select * from SizeB

INSERT INTO SIZEB(AgentId, ProductId, SizePro, Quantity) VALUES(1,1, 'S', 20)
INSERT INTO SIZEB(AgentId, ProductId, SizePro, Quantity) VALUES(1,1, 'M', 20)
INSERT INTO SIZEB(AgentId, ProductId, SizePro, Quantity) VALUES(1,1, 'L', 20)


INSERT INTO SIZEB(AgentId, ProductId, SizePro, Quantity) VALUES(2,1, 'S', 15)
INSERT INTO SIZEB(AgentId, ProductId, SizePro, Quantity) VALUES(2,3, 'S', 26)
INSERT INTO SIZEB(AgentId, ProductId, SizePro, Quantity) VALUES(2,5, 'S', 10)


INSERT INTO SIZEB(AgentId, ProductId, SizePro, Quantity) VALUES(3,4, 'M', 21)
INSERT INTO SIZEB(AgentId, ProductId, SizePro, Quantity) VALUES(3,2, 'L', 10)
INSERT INTO SIZEB(AgentId, ProductId, SizePro, Quantity) VALUES(3,6, '42', 20)

INSERT INTO SIZEB(AgentId, ProductId, SizePro, Quantity) VALUES(1,7, 'M', 40)
INSERT INTO SIZEB(AgentId, ProductId, SizePro, Quantity) VALUES(1,7, 'S', 40)
INSERT INTO SIZEB(AgentId, ProductId, SizePro, Quantity) VALUES(1,7, 'L', 40)

INSERT INTO SIZEB(AgentId, ProductId, SizePro, Quantity) VALUES(2,7, 'M', 40)
INSERT INTO SIZEB(AgentId, ProductId, SizePro, Quantity) VALUES(2,7, 'S', 40)
INSERT INTO SIZEB(AgentId, ProductId, SizePro, Quantity) VALUES(2,7, 'L', 40)

INSERT INTO SIZEB(AgentId, ProductId, SizePro, Quantity) VALUES(1,8, 'M', 40)
INSERT INTO SIZEB(AgentId, ProductId, SizePro, Quantity) VALUES(1,8, 'S', 40)
INSERT INTO SIZEB(AgentId, ProductId, SizePro, Quantity) VALUES(1,8, 'L', 40)

INSERT INTO SIZEB(AgentId, ProductId, SizePro, Quantity) VALUES(1,9, 'M', 40)
INSERT INTO SIZEB(AgentId, ProductId, SizePro, Quantity) VALUES(1,9, 'S', 40)
INSERT INTO SIZEB(AgentId, ProductId, SizePro, Quantity) VALUES(1,9, 'L', 40)

INSERT INTO SIZEB(AgentId, ProductId, SizePro, Quantity) VALUES(1,10, 'M', 40)
INSERT INTO SIZEB(AgentId, ProductId, SizePro, Quantity) VALUES(1,10, 'S', 40)
INSERT INTO SIZEB(AgentId, ProductId, SizePro, Quantity) VALUES(1,10, 'L', 40)

INSERT INTO SIZEB(AgentId, ProductId, SizePro, Quantity) VALUES(1,11, 'M', 40)
INSERT INTO SIZEB(AgentId, ProductId, SizePro, Quantity) VALUES(1,11, 'S', 40)
INSERT INTO SIZEB(AgentId, ProductId, SizePro, Quantity) VALUES(1,11, 'L', 40)

INSERT INTO SIZEB(AgentId, ProductId, SizePro, Quantity) VALUES(2,11, 'M', 40)
INSERT INTO SIZEB(AgentId, ProductId, SizePro, Quantity) VALUES(2,11, 'S', 40)
INSERT INTO SIZEB(AgentId, ProductId, SizePro, Quantity) VALUES(2,11, 'L', 40)

INSERT INTO SIZEB(AgentId, ProductId, SizePro, Quantity) VALUES(3,11, 'M', 40)
INSERT INTO SIZEB(AgentId, ProductId, SizePro, Quantity) VALUES(3,11, 'S', 40)
INSERT INTO SIZEB(AgentId, ProductId, SizePro, Quantity) VALUES(3,11, 'L', 40)

INSERT INTO SIZEB(AgentId, ProductId, SizePro, Quantity) VALUES(3,12, 'M', 40)
INSERT INTO SIZEB(AgentId, ProductId, SizePro, Quantity) VALUES(3,12, 'S', 40)
INSERT INTO SIZEB(AgentId, ProductId, SizePro, Quantity) VALUES(3,12, 'L', 40)

select * from account
INSERT INTO ACCOUNT (UserName, PassWord, PhoneNumber, Role, Email, Avatar) VALUES(
'ADMIN', 'NguyenThienThang2002', 0123456789, 1, 'nguyenthienthang@gmail.com', NULL
)

INSERT INTO ACCOUNT (UserName, PassWord, PhoneNumber, Role, Email, Avatar) VALUES(
'TRONG', 'nguyentrong	', 0123456781, 2, 'nguyenhuutrong@gmail.com', NULL)

INSERT INTO ACCOUNT (UserName, PassWord, PhoneNumber, Role, Email, Avatar) VALUES(
'KHOA', 'nguyendangkhoa2002', 0123456782, 3, 'nguyendangkhoa@gmail.com', NULL
)

INSERT INTO ACCOUNT (UserName, PassWord, PhoneNumber, Role, Email, Avatar) VALUES(
'HUNG', 'hoangphihung2002', 0123456783, 4, 'hoangphihung@gmail.com', NULL
)

INSERT INTO ACCOUNT (UserName, PassWord, PhoneNumber, Role, Email, Avatar) VALUES(	
'QUANG', 'quangnguyen2002', 0123456784, 5, 'khoanguyen@gmail.com', NULL
)

INSERT INTO CART(UserId, SizeId, Quantity, OrderId)  VALUES (
 2, 1, 3, null
)
INSERT INTO CART(UserId, SizeId, Quantity, OrderId)  VALUES (
 2, 2, 5, 3
)


select * from cART
SELECT * FROM ORDERS
INSERT INTO ORDERS(Payment, Address, Orderdate, shipdate, receiveddate, status) VALUES (
 900, 'Mai Son - Son La', '1-12-2023', '1-10-2023', '1-11-2023',  'In Process'
)

-- Inserting sample data into the "ORDERS" table
INSERT INTO ORDERS (Payment, Address, OrderDate, ShipDate, ReceivedDate, Status)
VALUES (100.50, '123 Main Street, Cityville', TO_DATE('2023-09-15', 'YYYY-MM-DD'), NULL, NULL, 'Processing');

INSERT INTO ORDERS (Payment, Address, OrderDate, ShipDate, ReceivedDate, Status)
VALUES (75.25, '456 Elm Street, Townsville', TO_DATE('2023-09-16', 'YYYY-MM-DD'), TO_DATE('2023-09-18', 'YYYY-MM-DD'), NULL, 'Shipped');

-- Add more INSERT statements for additional orders as needed

--INNER JOIN

SELECT P.ProductID, P.ProductName, P.Price, P.Season, P.Description, P.Gender, P.CategoryID, S.Quantity, S.SizePro, A.AgentID
FROM APRODUCTS P INNER JOIN SIZEB S  on P.ProductID = S.ProductID INNER JOIN AGENTA A  ON A.AgentID = S.AgentID

--Select distinct
SELECT DISTINCT P.ProductID, P.ProductName, P.Price, P.Image, P.Season, P.Description, P.Gender, P.CategoryID, S.SizePro
FROM APRODUCTS P INNER JOIN SIZEB S 
ON P.ProductID = S.ProductID 
WHERE P.Gender ='female' ORDER BY P.Price DESC

--Left Join
Select Distinct A.username, A.PhoneNumber, A.email, c.Quantity, o.payment,o.address, o.orderdate, o.shipdate, o.receiveddate, o.status
from Account A inner join Cart c on A.userid= c.userid 
left join Orders o on c.orderId= o.orderId

--Update

UPDATE APRODUCTS SET Season = 2 WHERE ProductID =  8

